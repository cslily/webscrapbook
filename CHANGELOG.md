# Changelog
* This project generally follows [semantic versioning](https://semver.org/). For a version `x.y.z`, `x` means a major (backward incompatible) change, `y` means a minor (backward compatible) change, and `z` means a patch (bug fix). Few versions may not strictly follow this rule due to historical reasons, though.
* Versions before 1.0 are in initial development. APIs are not stable for these versions, even a `y` version can involve a breaking change, and only partial notable changes are summarized in this document. See full commit history in the source repository for details.
* Backend server requirement in this document refers to the version of [`webscrapbook` Python package](https://github.com/danny0838/pywebscrapbook) (or PyWebScrapBook).

## [0.125.0] - 2021-06-29
* Added a new `viewer.viewAttachments` option to force opening attachments using the archive page viewer.

## [0.124.0] - 2021-06-09
* Added hotkeys for batch capture page.
* Fixed an issue that clicked links with specified target or base URL not working in the archive page viewer.

## [0.123.0] - 2021-06-06
* Fixed an issue that modified options not taken when invoking a capture in some ways.
* Imported options without saving are no more applied.
* Support auto-updating options for sidebar and more scrapbook-related pages.

## [0.122.0] - 2021-05-30
* Added support of depth > 0 for merge capture.
* Added `View source page` editor tool.
* Adjusted format of the `index.json` file generated by in-depth capture.
* Fixed an issue that the URL of a redirected or meta refreshed page is not corrected rewritten for in-depth capture.
* Fixed an issue that resources under file: protocol cannot be captured.
* Fixed an issue that some context menu commands don't work.

## [0.121.0] - 2021-05-26
* Added `Find previous/next annotation` editor tool.

## [0.120.0] - 2021-05-21
* Optimized code for internal cache for better performance.
* Adjusted schema for IndexedDB-related internal cache for better performance.

## [0.119.0] - 2021-05-14
* Added and adjusted several default highlighter style options.
* Adjusted default highlighter styles.
* Added support of `imagesrcset` attribute for `<link>`s.
* Added support of `rel` value `modulepreload`, `prerender`, `dns-prefetch`, or `preconnect` for `<link>` tags.
* Added a new `capture.prefetch` option to tweak handling of prefetch-like `<link>` tags.
* Added `capture.contentSecurityPolicy` option to tweak handling of `content-security-policy` meta tag and `nonce` attribute.
* Removed `capture.removeIntegrity` option.
* `crossorigin` attribute is now removed only when a resource is saved.
* `integrity` attribute is now removed only for related tags.

## [0.118.0] - 2021-05-08
* Added support of capturing source documents embedded via `<object>` tags.
* No more save XHTML or SVG files as srcdoc when saving as single HTML.

## [0.117.0] - 2021-05-05
* Improved config checking of capture helpers and autocapture to prevent more possible bad input.
* Fixed an issue that unfetchable resources are not skipped during internalization.
* Fixed an error when internalizaing a single HTML item. Internalized resources are now saved as data URLs in such case.

## [0.116.0] - 2021-05-03
* Capture the original page rather than the meta refreshed target page if the meta refresh time is non-zero.
* Improved the tooltips about autosave.
* Adjusted handling of some HTTP headers and HTML attributes to conform with the spec better.
* Fixed some potential errors for ASCII whitespace handling.
* Fixed a potential error handling for nested svg and math elements.

## [0.115.0] - 2021-05-01
* Preloads and prefetches are now removed by default, with a new option `capture.preload` to tweak the behavior.
* Shadow DOMs are saved as `data-scrapbook-shadowdom` attribute in place of `data-scrapbook-shadowroot`, with simplified data structure and smaller size.

## [0.114.0] - 2021-04-27
* Hash part of source URL is now considered when viewing an item.
* Fixed an issue that URL hash is not included in the source URL for the captured item.
* Fixed several issues on handling an item whose index file is an archive.

## [0.113.0] - 2021-04-24
* Added support of more modes for `Form status` capture option.
* Added a default option for the backend server URL option.
* Added support of enabling/disabling undo feature from its context menu.
* Added support of `Home` and `End` for sidebar key navigation.
* Added a message for a scrapbook configured as `no_tree` in the sidebar.
* Added support of `limit:` command for search.
* Fixed an issue that certain interactive properties, such as form status, canvas, and shadow DOM, are lost after an unerase in a re-loaded document.
* Fixed an issue that unrelated content in the document be refreshed after an undo.
* Fixed an issue that certain interactive properties, such as canvas and shadow DOM, are lost after an undo.
* Fixed missing support of opening in new tab for `View index page` sidebar command.
* Fixed an issue that the opened postit is not saved when switching scrapbook.
* Fixed an issue that switching scrapbook after a change of server config can load incorrect tree data.
* Fixed an error causing the copy item dialog in a manage dialog not working.
* Fixed an error causing unit tests not working.

## [0.112.0] - 2021-04-19
* Added options for whether to open in new tab for sidebar operations. Most operations now defaults to open in the active tab.
* Added support of opening in new tab by holding Ctrl or Shift for sidebar operations.
* Added support of adding as child item by holding Alt when creating a new item in the sidebar.
* Added support of recursive copy info by holding Ctrl or Shift.
* Allow opening multiple search tabs from the sidebar.
* Fixed an issue of missing `index` key when invoking `capture as` through dragging and dropping.
* Fixed an error when invoking copy info with an item having a malformed source URL.

## [0.111.0] - 2021-04-17
* Improved GUI for batch capture dialog.
* Added support of captured pages notification for captures during the same browser session.
* Moved option `scrapbook.notifyPageCaptured` to `ui.notifyPageCaptured`.
* Notification of captured pages now updates when a capture succeeds.
* Reworked duplicates detection for autocapture to check for captures during the same browser session and items in the backend server.
* Fixed an issue of script error for Firefox for Android < 55.

## [0.110.0] - 2021-04-14
* Fixed a regression that saved filename for a capture does not have `/`s generated by a placeholder tidied.

## [0.109.0] - 2021-04-11
* Added support of context displaying for the search page.
* No more save a file named `history.rdf`, which is preserved by MAFF format, when capturing a page.
* Fixed an issue of occasional unexpected extending of highlight range for the page editor.
* Fixed an issue that a text crop may cut between a unicode surrogate pair.

## [0.108.0] - 2021-04-05
* Improved GUI for options verification.
* Reworked the syntax of `capture.saveFilename` option.
* Added support of auto-capture in the options.
* Added `copyinfo` command to sidebar.

## [0.107.0] - 2021-04-03
* Added support of viewing folder items.
* Added support of editing a postit in the sidebar.
* Added support of `tc:`, `charset:`, and `location:` search commands.
* Improved GUI for note and postit editors.
* Fixed several compatibility issues in Firefox 52.

## [0.106.0] - 2021-04-01
* Bumped server requirement to >= 0.36.
* Added support of note for a backup.
* Automatically create a tree backup for each transaction to prevent an accidental file corruption, with a new option `scrapbook.transactionAutoBackup` to tweak the behavior.

## [0.105.0] - 2021-03-28
* Fixed an issue that nothing is captured when selecting exactly a single node.
* Fixed an issue that nodes outside the html node are not captured.
* Improved capture selection to support more special cases, such as a selection outside of the body node.
* No more generate linefeeds for the capture/save content by default, with a new option `capture.preffyPrint` to tweak the behavior.
* Added `attach link` to the editor tools.

## [0.104.1] - 2021-03-27
* Fixed an issue that special chars (e.g. `<`, `&`, and `>`) in a postit item are not loaded correctly.

## [0.104.0] - 2021-03-27
* WebScrapBook loaders are now injected as last elements in `<body>` rather than after `<body>`.
* No more create loaders for non-annotated highlights.

## [0.102.0] - 2021-03-16
* Added support of copying item IDs of the tree selection via Ctrl+C.
* Fulltext cache is now updated automatically only when `Generate fulltext cache` option is checked.

## [0.101.0] - 2021-03-08
* Added support of capturing via dragging a browser action command into the sidebar.

## [0.100.0] - 2021-03-01
* Added support of geolocation metadata.

## [0.98.0] - 2021-01-24
* Reworked option `capture.requestReferrer` as `capture.referrerPolicy`, which supports options as the `Referrer-Policy` HTTP header.
* Added option `capture.referrerSpoofSource`.

## [0.97.0] - 2021-01-03
* Added support of post-it items.

## [0.95.0] - 2020-11-18
* Changed internal identifier for auto-close dialog option.
* Added support of `Capture as`.

## [0.93.0] - 2020-11-13
* Added a capture option `Save resources sequentially`.
* Reworked auto-close dialog option to support more modes.

## [0.92.0] - 2020-11-11
* Added support of in-depth capture.
* Changed internal identifier for some capture links (download linked files) related options.

## [0.89.0] - 2020-10-31
* Added `copy` command to sidebar.
* Added support for cross-scrapbook drag-and-drop.
* The descendant items are now automatically deselected when an item is toggled collapsed.
* Fixed an issue that the sidebar is unlocked when a dialog is dismissed, even though the command is still running.

## [0.88.0] - 2020-10-29
* Added support of editing created and modified time in the sidebar.
* Added support of `index:` command for the search page.

## [0.87.0] - 2020-10-27
* Bumped server requirement to >= 0.29.
* Added `sort` command to sidebar.
* Added `capture again` command to sidebar.

## [0.86.0] - 2020-10-26
* Fixed styling error for `site` and `combine` types.

## [0.85.0] - 2020-10-25
* Added options `notify captured pages` and `view captured pages`.

## [0.84.0] - 2020-10-22
* Reworked `batch capture` as `batch capture all tabs`, and remove `capture all tabs`.
* Fixed an issue that backup files are generated for auto fulltext cache.

## [0.83.0] - 2020-10-19
* Changed view status caching format for sidebar to avoid a comflict within different views.
* Added support of top-level null value for *.js tree files.

## [0.82.0] - 2020-10-17
* Added a capture option to specify delay time before capturing an auto-launching tab.
* Added a capture option to insert an infobar.
* Improved capture helpers:
  * Added `name` and `debug` properties.
  * Added `options` and `insert` commands.
  * Added support to debug a capture helper commands using `*` prefix.
  * Improved error reporting.
* Improved sidebar and manage dialog:
  * Adjusted command button to show scrapbook-related commands rather than echo the context menu.
  * Added `search within` command.
  * Added `recover` command for recycling bin.

## [0.81.0] - 2020-10-14
* Reworked editor toolbar:
  * Added context menu in place of sub-menu buttons. This prevents toolbar overflow on mobile browsers.
  * Enlarged toolbar and buttons.

## [0.79.0] - 2020-10-06
* Bumped server requirement to >= 0.23.
* Reworked site indexer:
  * Moved site indexer button from browser action to options page.
  * Shifted site indexer to server-side, with greatly improved performance, and minor format change. (Consider recreate fulltext cache.)
  * Automatically update fulltext cache when a web page or note is captured or edited.
  * Added data checker. Moved the feature of importing non-indexed web page files through site indexer to data checker.
  * Dropped support of site indexing through dragging and dropping local filesystem folders or ZIP files.
  * Dropped support of importing legacy ScrapBook data through site indexer. (Use `wsb convert sb2wsb` of PyWebScrapBook instead.)
* Added `disabled` capture helper property.

## [0.78.0] - 2020-09-20
* Added `Accept` header for requests to the backend server. This allows the reverse proxy server or upper server to response with a more appropriate format to the client.

## [0.76.0] - 2020-09-06
* Added support of self version checking. An error will now be thrown if the extension version is too old to work with the corresponding backend server.
* A request for acquiring an access token now uses a POST rather than GET method.

## [0.75.6] - 2020-09-05
* Bumped server requirement to >= 0.17.

## [0.75.0] - 2020-05-25
* Merged record related capture options.

## [0.73.0] - 2020-05-08
* Added support of GUI editor of annotated marker for page editor.

## [0.70.0] - 2020-04-27
* Added support of annotated marker for page editor.
* Added support of sticky note for page editor.

## [0.68.0] - 2020-04-17
* Dropped support of using filesystem API for viewing a page archive.

## [0.63.0] - 2020-04-04
* Added search and edit to the sidebar.

## [0.62.0] - 2020-03-22
* Added capture helper, in place of the preclude option.

## [0.60.0] - 2020-01-25
* Bumped server requirement to >= 0.12.
* Implemented new transferring protocol to improve the performance of indexing through the backend server.

## [0.59.0] - 2020-01-18
* Added support of context menu for the sidebar.

## [0.53.0] - 2019-09-27
* Added a capture option to remove hidden elements.
* Added a capture option to preclude elements.
* Added a capture option to limit resource size to download.

## [0.52.0] - 2019-09-15
* Dropped support of `scripted single html` format for a page capture.

## [0.51.0] - 2019-09-13
* Added support to capture shadowRoot content.

## [0.50.0] - 2019-09-08
* Fixed an issue that page editor is loaded for every page if backend server URL is not set.

## [0.49.0] - 2019-09-07
* Added page editor.

## [0.48.0] - 2019-09-01
* Bumped server requirement to >= 0.8.
* Added support for `no_tree` scrapbooks.

## [0.46.0] - 2019-08-25
* Added support of drag and drop to manage scrapbook items.

## [0.45.0] - 2019-07-01
* Added support to capture dynamic CSS.

## [0.44.1] - 2019-05-30
* Fixed a packaging error for 0.44.0.

## [0.41.0] - 2019-04-15
* Bumped server requirement to >= 0.6.
* Now use `save` instead of `upload` action to upload a file.

## [0.39.2] - 2019-03-31
* Bumped server requirement to >= 0.3.

## [0.37.0] - 2019-03-18
* Bumped server requirement to >= 0.2.
* Added support of backend server version checking. An error will now be thrown if the backend server version is too old to work with this extension.

## [0.36.0] - 2019-03-14
* Added support for sidebar and backend server.

## [0.32.0] - 2019-02-23
* Dropped support of Firefox < 52 and Chromium < 55.
* Refactor the code to work with async function.

## [0.27.0] - 2018-08-25
* Dropped support of JavaScript when viewing a page archive, due to a security concern.

## [0.25.0] - 2017-12-29
* Added unit tests.

## [0.17.0] - 2017-11-15
* Added site indexer.

## [0.1.0] - 2017-07-11
* First public release.
